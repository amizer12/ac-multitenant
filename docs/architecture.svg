<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 700">
  <defs>
    <style>
      .title { font: bold 24px Arial; fill: #232F3E; }
      .cluster-label { font: bold 14px Arial; fill: #232F3E; }
      .node-label { font: 11px Arial; fill: #232F3E; text-anchor: middle; }
      .small-label { font: 9px Arial; fill: #666; text-anchor: middle; }
      .cluster { fill: #F8F9FA; stroke: #DEE2E6; stroke-width: 2; rx: 8; }
      .aws-orange { fill: #FF9900; }
      .aws-blue { fill: #3B48CC; }
      .aws-green { fill: #01A88D; }
      .arrow { stroke: #666; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
      .arrow-dashed { stroke: #999; stroke-width: 1.5; fill: none; stroke-dasharray: 5,3; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="35" class="title" text-anchor="middle">AWS Bedrock Agent Core Platform - Architecture</text>
  
  <!-- Client -->
  <g transform="translate(50, 280)">
    <circle cx="30" cy="30" r="25" fill="#4A90D9"/>
    <circle cx="30" cy="18" r="10" fill="white"/>
    <path d="M10 45 Q30 55 50 45" fill="white"/>
    <text x="30" y="75" class="node-label">Client</text>
  </g>
  
  <!-- Frontend Cluster -->
  <rect x="150" y="80" width="180" height="180" class="cluster"/>
  <text x="240" y="100" class="cluster-label" text-anchor="middle">Frontend</text>
  
  <!-- CloudFront -->
  <g transform="translate(180, 120)">
    <rect width="50" height="50" rx="5" class="aws-orange"/>
    <text x="25" y="30" fill="white" font-size="20" text-anchor="middle">CF</text>
    <text x="25" y="75" class="node-label">CloudFront</text>
  </g>
  
  <!-- S3 Frontend -->
  <g transform="translate(260, 120)">
    <rect width="50" height="50" rx="5" class="aws-green"/>
    <text x="25" y="30" fill="white" font-size="16" text-anchor="middle">S3</text>
    <text x="25" y="75" class="node-label">Static Assets</text>
  </g>
  
  <!-- API Layer Cluster -->
  <rect x="380" y="80" width="120" height="180" class="cluster"/>
  <text x="440" y="100" class="cluster-label" text-anchor="middle">API Layer</text>
  
  <!-- API Gateway -->
  <g transform="translate(405, 130)">
    <rect width="70" height="50" rx="5" class="aws-orange"/>
    <text x="35" y="25" fill="white" font-size="12" text-anchor="middle">API</text>
    <text x="35" y="40" fill="white" font-size="12" text-anchor="middle">Gateway</text>
    <text x="35" y="75" class="node-label">REST API</text>
  </g>
  
  <!-- Lambda Functions Cluster -->
  <rect x="550" y="60" width="280" height="320" class="cluster"/>
  <text x="690" y="80" class="cluster-label" text-anchor="middle">Lambda Functions</text>
  
  <!-- Agent Operations -->
  <g transform="translate(570, 100)">
    <rect width="110" height="120" rx="5" fill="#FFF3E0" stroke="#FF9900"/>
    <text x="55" y="20" class="small-label">Agent Operations</text>
    <rect x="10" y="30" width="90" height="20" rx="3" class="aws-orange"/>
    <text x="55" y="44" fill="white" font-size="9" text-anchor="middle">deploy_agent</text>
    <rect x="10" y="55" width="90" height="20" rx="3" class="aws-orange"/>
    <text x="55" y="69" fill="white" font-size="9" text-anchor="middle">invoke_agent</text>
    <rect x="10" y="80" width="90" height="20" rx="3" class="aws-orange"/>
    <text x="55" y="94" fill="white" font-size="9" text-anchor="middle">list/get/delete</text>
  </g>
  
  <!-- Token Tracking -->
  <g transform="translate(700, 100)">
    <rect width="110" height="120" rx="5" fill="#E3F2FD" stroke="#3B48CC"/>
    <text x="55" y="20" class="small-label">Token Tracking</text>
    <rect x="10" y="30" width="90" height="20" rx="3" class="aws-orange"/>
    <text x="55" y="44" fill="white" font-size="9" text-anchor="middle">token_usage</text>
    <rect x="10" y="55" width="90" height="20" rx="3" class="aws-orange"/>
    <text x="55" y="69" fill="white" font-size="9" text-anchor="middle">set_tenant_limit</text>
    <rect x="10" y="80" width="90" height="20" rx="3" class="aws-orange"/>
    <text x="55" y="94" fill="white" font-size="9" text-anchor="middle">stream_processor</text>
  </g>
  
  <!-- Async Processing -->
  <g transform="translate(620, 240)">
    <rect width="120" height="60" rx="5" fill="#FCE4EC" stroke="#E91E63"/>
    <text x="60" y="20" class="small-label">Async Processing</text>
    <rect x="15" y="30" width="90" height="22" rx="3" class="aws-orange"/>
    <text x="60" y="45" fill="white" font-size="9" text-anchor="middle">SQS Queue</text>
  </g>
  
  <!-- Config -->
  <g transform="translate(620, 315)">
    <rect width="120" height="50" rx="5" fill="#F3E5F5" stroke="#9C27B0"/>
    <rect x="15" y="15" width="90" height="22" rx="3" class="aws-orange"/>
    <text x="60" y="30" fill="white" font-size="9" text-anchor="middle">config_injector</text>
  </g>
  
  <!-- Data Storage Cluster -->
  <rect x="880" y="60" width="140" height="220" class="cluster"/>
  <text x="950" y="80" class="cluster-label" text-anchor="middle">Data Storage</text>
  
  <!-- DynamoDB Tables -->
  <g transform="translate(900, 100)">
    <rect width="100" height="30" rx="3" class="aws-blue"/>
    <text x="50" y="20" fill="white" font-size="10" text-anchor="middle">Agents Table</text>
  </g>
  <g transform="translate(900, 140)">
    <rect width="100" height="30" rx="3" class="aws-blue"/>
    <text x="50" y="20" fill="white" font-size="10" text-anchor="middle">Token Usage</text>
  </g>
  <g transform="translate(900, 180)">
    <rect width="100" height="30" rx="3" class="aws-blue"/>
    <text x="50" y="20" fill="white" font-size="10" text-anchor="middle">Aggregation</text>
  </g>
  <g transform="translate(900, 220)">
    <rect width="100" height="30" rx="3" class="aws-green"/>
    <text x="50" y="20" fill="white" font-size="10" text-anchor="middle">S3 Agent Code</text>
  </g>
  
  <!-- AI Services Cluster -->
  <rect x="880" y="300" width="140" height="80" class="cluster"/>
  <text x="950" y="320" class="cluster-label" text-anchor="middle">AI Services</text>
  
  <!-- Bedrock -->
  <g transform="translate(895, 335)">
    <rect width="110" height="35" rx="5" class="aws-green"/>
    <text x="55" y="15" fill="white" font-size="10" text-anchor="middle">Bedrock</text>
    <text x="55" y="28" fill="white" font-size="9" text-anchor="middle">Agent Core</text>
  </g>
  
  <!-- Arrows -->
  <!-- Client to CloudFront -->
  <path d="M105 310 L180 170" class="arrow"/>
  
  <!-- Client to API Gateway -->
  <path d="M105 310 L405 180" class="arrow"/>
  
  <!-- CloudFront to S3 -->
  <path d="M230 145 L260 145" class="arrow"/>
  
  <!-- API Gateway to Lambdas -->
  <path d="M475 155 L570 155" class="arrow"/>
  
  <!-- Lambdas to DynamoDB -->
  <path d="M830 150 L900 130" class="arrow"/>
  
  <!-- Lambdas to S3 Code -->
  <path d="M830 180 L900 235" class="arrow"/>
  
  <!-- Lambdas to Bedrock -->
  <path d="M830 200 L895 350" class="arrow"/>
  
  <!-- Invoke to SQS -->
  <path d="M680 200 L680 240" class="arrow"/>
  
  <!-- SQS to Stream Processor -->
  <path d="M740 270 L790 180" class="arrow"/>
  
  <!-- Stream to DynamoDB -->
  <path d="M810 160 L900 160" class="arrow"/>
  
  <!-- Config Injector to S3 Frontend (dashed) -->
  <path d="M620 340 Q400 400 285 195" class="arrow-dashed"/>
  
  <!-- Legend -->
  <g transform="translate(50, 450)">
    <text x="0" y="0" class="cluster-label">Data Flows:</text>
    <text x="0" y="25" class="small-label" text-anchor="start">• Deploy: Client → API Gateway → Lambda → S3 + Bedrock → DynamoDB</text>
    <text x="0" y="45" class="small-label" text-anchor="start">• Invoke: Client → API Gateway → Lambda → Check Limit → Bedrock → SQS</text>
    <text x="0" y="65" class="small-label" text-anchor="start">• Token Tracking: SQS → Lambda → DynamoDB → Stream → Aggregation</text>
  </g>
  
  <!-- Component counts -->
  <g transform="translate(600, 450)">
    <text x="0" y="0" class="cluster-label">Components:</text>
    <text x="0" y="25" class="small-label" text-anchor="start">• 12 Lambda Functions</text>
    <text x="150" y="25" class="small-label" text-anchor="start">• 4 DynamoDB Tables</text>
    <text x="0" y="45" class="small-label" text-anchor="start">• 2 S3 Buckets</text>
    <text x="150" y="45" class="small-label" text-anchor="start">• 1 SQS Queue</text>
    <text x="0" y="65" class="small-label" text-anchor="start">• CloudFront CDN</text>
    <text x="150" y="65" class="small-label" text-anchor="start">• Bedrock Agent Core</text>
  </g>
</svg>
